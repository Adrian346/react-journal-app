import cloudinary from 'cloudinary'

import { fileUpload } from "../../helpers/fileUpload"


cloudinary.config({ 
    cloud_name: 'drxvgz00g', 
    api_key: '696221695644164', 
    api_secret: 'mcfjQgMIAt-knBc8l6DeUdO1SoI' 
});

describe('Pruebas en fileUpload', () => {

    // test('should ', () => {
        
    // })
    
    
    test('Debe de cargar un archivo y retornar el URL', async() => {
        const resp = await fetch('data:image/jpeg;base64,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')
        const blob = await resp.blob()

        const file = new File([blob], 'foto.png')
        const url = await fileUpload( file )

        expect( typeof url ).toBe('string')

        const segements = url.split('/')
        const imageId = segements[ segements.length - 1 ].replace('.jpg', '')

        await cloudinary.v2.api.delete_resources(imageId);
    })

    test('Debe de retornar un error', async() => {
        
        const file = new File([], 'foto.png')
        const url = await fileUpload( file )

        expect( url ).toBe(null)
    })
    
})
